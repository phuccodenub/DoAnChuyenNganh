# Shared Redis Configuration Template
# This file contains reusable cache service configuration to avoid duplication

version: '3.8'

x-redis-base: &redis-base
  image: redis:7-alpine
  restart: unless-stopped
  command: redis-server --appendonly yes
  healthcheck:
    test: ["CMD", "redis-cli", "ping"]
    interval: 30s
    timeout: 10s
    retries: 5
  networks:
    - lms-network

# Development Redis (with data persistence)
x-redis-dev: &redis-dev
  <<: *redis-base

# Production Redis (with optimized settings)
x-redis-prod: &redis-prod
  <<: *redis-base
  command: redis-server --appendonly yes --maxmemory 256mb --maxmemory-policy allkeys-lru